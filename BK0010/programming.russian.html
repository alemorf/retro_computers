<html lang="ru">
<head>
<style>
th {
    text-align: inherit;
}
.tbl2 {
    border-collapse: collapse;
}
.tbl2 > tbody > tr > td, .tbl2 > tbody > tr > th {
    border: 1px solid black;
}
</style>
<meta charset="utf-8">
</head>
<body>

<div class="h2">Команды монитора</div>

<table class="tbl2">
<tr><th>M</th><td>Загрузка с магнитофона</td></tr>
<tr><th>Mn</th><td>Загрузка с магнитофона по указанному адресу (восьмеричное число)</td></tr>
<tr><th>S</th><td>Запуск программы с адреса её загрузки</td></tr>
<tr><th>Sn</th><td>Запуск программы по указанsному адресу (восьмерисное число</td></tr>
<tr><th>T</th><td>Запуск тестов, тесты находятся в блоке МСТД, перход на адрес 0160100.</td></tr>
</table>

<p>Любая буква  от  "А"  до "К" вызовет перезагрузку.</p>

<div class="h2">Карта памяти</div>

<table class="tbl2">
<tr><th></th><th>Описание</th></tr>
<tr><th>0000000 - 0000777</th><td>ОЗУ Системные переменные, стек</td></tr>
<tr><th>0001000 - 0037777</th><td>ОЗУ Пользователя</td></tr>
<tr><th>0040000 - 0077777</th><td>ОЗУ Экран</td></tr>
<tr><th>0100000 - 0177577</th><td>ПЗУ</td></tr>
<tr><th>0177660</th><td>Регистр состояния клавиатуры<br><br>бит 7: в регистре данных есть новые данные<br>бит 6: прерывание разрешено</td></tr>
<tr><th>0177662</th><td>Регистр данных клавиатуры, содержит код нажатой клавиши</td></tr>
<tr><th>0177664</th><td>Регистр вертикального сдвига экрана</td></tr>

<tr><th>0177706</th><td>Таймер, начальное значение</td></tr>
<tr><th>0177710</th><td>Таймер, текущее значение, только чтение</td></tr>
<tr><th>0177712</th><td>Таймер, управление<br><br>
бит 0: При записи 1 таймер останаливается<br>
бит 1: Если 1, то вслед за 0 всегда идет 0177777, независимо от значения 0177706 и режима одновибратора, бит 7 не устанавливается<br>
бит 2: Если 1, то устанавливать бит 7 в конце периода<br>
бит 3: Если 1, то в конце приода остановить таймер<br>
бит 4: При записи 1 таймер запускается, счет начинается со значение из регистра 0177706<br>
биты 6,5: Делитель тактовой частоты: 00b=Fcpu, 10b=Fcpu/4, 01b=Fcpu/16, 11b=Fcpu/64<br>
бит 7: Если бит 2 установлен, то в конце при периода бит устанавлиается в единицу, сбрасывается программно<br>
<br>
Старшие 8 бит читаются как 1.
</td></tr>

<tr><th>0177714</th><td>Параллельный порт, 16 отдельных линий на выход и 16 линий на вход</td></tr>
<tr><th>0177716</th><td>
бит 4, запись: Передача данных на линию<br>
бит 4, чтение: Чтение данных на линию<br>
бит 5, запись: Передача данных на магнитофон, а так же передача сигнала готовности на линию<br>
бит 5, чтение: Чтение данных с магнитофона<br>
бит 6, запись: Передача данных на магнитофон и для генерации звукового сигнала<br>
бит 6, чтение: 0 если хотя бы одна клавиша нажата, иначе 1<br>
бит 7, запись: Вклчение двигателя магнитофона (1=стоп, 0=пуск)<br>
бит 7, чтение: Чтения сигнала готовности с линии</td></tr>
</table>

<div class="h2">Стандартный набор программ ввода-вывода</div>

<table class="tbl2">
<tr><th></th><th>Описание</th><th>Входные данные</th><th>Выходные данные</th></tr>
<tr><th>EMT 4</th><td>инициализация вектора прерывания клавиатуры</td><td></td><td></td></tr>
<tr><th>EMT 6</th><td>чтение кода символа с клавиатуры</td><td></td><td>R0</td></tr>
<tr><th>EMT 010</th><td>чтение строки с клавиатуры</td><td>R1 - адрес буфера<br>R2L - максимальная длина строки<br>R2H - символ-ограничитель</td><td>R1 - адрес послед символа + 1<br>R2L - максимум минус введеных символов</td></tr>
<tr><th>EMT 012</th><td>установка ключей К1-К10 клавиатуры</td><td>R0 - номер ключа от 1 до 10<br>R1 - адрес текста ключа</td><td></td></tr>
<tr><th>EMT 014</th><td>инициализация экрана и установка всех векторов прерываний</td><td></td><td></td></tr>
<tr><th>EMT 016</th><td>вывод символа</td><td>R0 - код символа</td><td></td></tr>
<tr><th>EMT 020</th><td>вывод строки</td><td>R1 - адрес строки<br>R2L - длина строки<br>R2H - символ-ограничитель</td><td></td></tr>
<tr><th>EMT 022</th><td>вывод символа в служебную строку</td><td>R0 - код символа (0 = очистка строки)<br>R1 - номер позиции в служебной строке</td><td></td></tr>
<tr><th>EMT 024</th><td>установка курсора по координатам</td><td>R1 - X<br>R2 - Y</td><td></td></tr>
<tr><th>EMT 026</th><td>получение координат курсора</td><td></td><td>R1 - X<br> R2 - Y</td></tr>
<tr><th>EMT 030</th><td>рисование точки</td><td>R1 - X<br>R2 - Y<br>R0 - цвет</td><td></td></tr>
<tr><th>EMT 032</th><td>рисование линии</td><td>R1 - X<br>R2 - Y<br>R0 - цвет</td><td></td></tr>
<tr><th>EMT 034</th><td>получение состояния дисплея</td><td></td><td>R0 - состояние<br><br>
бит 0 - Режим "32 символа в строке"<br>
бит 1 - Инверсия экрана<br>
бит 2 - Режим расширенной памяти (РП)<br>
бит 3 - Русский регистр<br>
бит 4 - Подчёркивание символа<br>
бит 5 - Инверсия символа<br>
бит 6 - Индикация "СУ"<br>
бит 7 - Блокировка редактирования<br>
бит 8 - Режим текстовой графики "ГРАФ"<br>
бит 9 - Запись в режиме "ГРАФ"<br>
бит 10 - Стирание в режиме "ГРАФ"<br>
бит 11 - Режим "32 символа в служ строке"<br>
бит 12 - Подчёркивание в служ строке<br>
бит 13 - Инверсия в служ строке<br>
бит 14 - Гашение курсора
</td></tr>
<tr><th>EMT 036</th><td>работа с магнитофоном</td><td>R1 - адрес параметров, обычно 0320<br><br>
Структура блока параметров:<br><br>
0: команда:<br>
<div style="padding-left:32pt">0 - стоп двигателя<br>
1 - пуск двигателя<br>
2 - запись на ленту<br>
3 - чтение с ленты<br>
4 - поиск</div>
1: код завершения:<br>
<div style="padding-left:32pt">0 - без ошибок<br>
1 - не то имя массива<br>
2 - ошибка контрольной суммы<br>
4 - останов по клавише "СТОП"</div>
2: адрес для чтения/записи (слово)<br>
<div style="padding-left:32pt">Если адрес 0, то при чтении будет<br>
использоваться адрес из заголовка.</div>
4: длина для записи (слово)<br>
6: имя файла (16 байт)<br>
026: адрес считанного файла (слово)<br>
030: длина считанного файла (слово)<br>
032: имя считанного файла (16 байт)<br>
</td><td></td></tr>
</table>

</body>
</html>
