<html lang="ru">
<head>
<meta charset="utf-8">
</head>
<body>
<h1>Башкирия-2М. Программирование.</h1>
<h2>Карта памяти</h2>
<style>
th {
    text-align: inherit;
}
.tbl2 {
    border-collapse: collapse;
}
.tbl2 td, .tbl2 th {
    padding: 2px 4px 2px 4px;
}
.tbl2 > tbody > tr > td, .tbl2 > tbody > tr > th {
    border: 1px solid black;
}
.tbl3 td, .tbl3 th th {
    text-align: center;
    padding: 2px 4px 2px 4px;
}
.tbl5 th {
    text-align: left;
}
</style>
<table class="tbl2 tbl3">
<tr><th></th><th>Режим 0</th><th>Режим 1</th><th>Режим 2</th><th>Режим 3</th><th>Режим 4</th><th>Режим 5</th><th>Режим 6</th><th>Режим 7</th></tr>
<tr><th>0000h - 27FFh</th><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ПЗУ</td></tr>
<tr><th>2800h - 2FFFh</th><td>ОЗУ</td><td>ОЗУ</td><td>Клавиатура</td><td>Клавиатура</td><td>Клавиатура</td><td>Клавиатура</td><td>ОЗУ</td><td>ПЗУ</td></tr>
<tr><th>3000h - 6FFFh</th><td>ОЗУ</td><td>Картридж</td><td>Видео 0</td><td>Видео 1</td><td>Видео 2</td><td>Видео 3</td><td>ОЗУ</td><td>ПЗУ</td></tr>
<tr><th>7000h - AFFFh</th><td>ОЗУ</td><td>Картридж</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ПЗУ</td></tr>
<tr><th>B000h - DFFFh</th><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ОЗУ</td><td>ПЗУ</td></tr>
<tr><th>E000h - FFFFh</th><td>ПЗУ</td><td>ПЗУ</td><td>ПЗУ</td><td>ПЗУ</td><td>ПЗУ</td><td>ПЗУ</td><td>ОЗУ</td><td>ПЗУ</td></tr>
</table>

<p>Видео 0,1,2,3 - это 4 страницы видеопамяти по 16 Кб. </p>
<p>Картридж - это устройство подключаемое к порту расширения, обычно это ПЗУ.</p>
<p>Клавиатура - это матрица кнопок клавиатуры, где младшие 8 или 9 бит адреса подключены к строкам, а шина данных к рядам.</p>
<p>Режим 7 устанавливается после включения или перезагрузки. В этом режиме ПЗУ размером 2000h повторяется по всём адресом пространстве.</p>

<h2>Клавиатура</h2>

<style>
.tbl4 th {
    vertical-align: middle;
}
.tbl4 td {
    width:40pt;
    text-align: center;
}
.tbl4 .d td {
    font-size: 0.8em;
}
</style>

<table class="tbl2 tbl4">
<tr><th></th><th>D7</th><th>D6</th><th>D5</th><th>D4</th><th>D3</th><th>D2</th><th>D1</th><th>D0</th><th></th></tr>
<tr><th>2801h</th><td>Ю</td><td>А</td><td>Б</td><td>Ц</td><td>Д</td><td>Е</td><td>Ф</td><td>Г</td><th rowspan="8">Основная<br>клавиатура</th></tr>
<tr><th>2802h</th><td>Х</td><td>И</td><td>Й</td><td>К</td><td>Л</td><td>М</td><td>Н</td><td>О</td></tr>
<tr><th>2804h</th><td>П</td><td>Я</td><td>Р</td><td>С</td><td>Т</td><td>У</td><td>Ж</td><td>В</td></tr>
<tr><th>2808h</th><td>Ь</td><td>Ы</td><td>З</td><td>Ш</td><td>Э</td><td>Щ</td><td>Ч</td><td>Ъ</td></tr>
<tr><th>2810h</th><td>-</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td></tr>
<tr><th>2820h</th><td>9</td><td>0</td><td>\</td><td>1</td><td>Ё</td><td>=</td><td>;</td><td><</td></tr>
<tr><th>2840h</th><td>ВК</td><td>ОЧЕК</td><td>СТОП</td><td>→←</td><td>←→</td><td>ЗБ</td><td>ТАБ</td><td>ПРОБЕЛ</td></tr>
<tr><th>2880h</th><td>ВРл</td><td>АЛФ</td><td>ГРФ</td><td>КЛЮЧ</td><td>ЦФР</td><td>УПР</td><td>()</td><td>ВРп</td></tr>
<tr><th>2901h</th><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><th rowspan="3">Цифровая<br>клавиатура</th></tr>
<tr><th>2902h</th><td>8</td><td>9</td><td></td><td></td><td>></td><td>:</td><td>.</td><td>?</td></tr>
<tr><th>2904h</th><td>F1</td><td>F2</td><td>F3</td><td>F4</td><td>F5</td></td><td></td><td></td><td></tr>
</table>

<h2>Карта портов ввод-вывода</h2>

<table class="tbl2 tbl5">
<tr><th>00h - 03h</th><th>КР580ВИ53, таймер</th></tr>
<tr><td>00h</td><td>Канал A. Делитель частоты прерывания таймера, тактируется каналом C</td></tr>
<tr><td>01h</td><td>Канал B. Делитель частоты звука, тактируется системной частотой</td></tr>
<tr><td>02h</td><td>Канал C. Делитель частоты последовательного интерфейса КР580ВВ51, тактируется системной частотой</td></tr>
<tr><td>03h</td><td>Управляющий регистр КР580ВИ53</td></tr>

<tr><th>04h - 07h</th><th>КР580ВВ55, управление дисководом, находится на подключаемом модуле</th></tr>
<tr><td>06h</td><td>xxHxDDDM<br><br>
H - при установке в 1 команда IN 1Ch останавливает процессор, пока нет готовности ВГ93<br>
D - выбор дисковода A = 101b, B = 100b, C = 011b, D = 010b<br>
M - запуск двигателей дисководов<br>
</td></tr>

<tr><td>07h</td><td>Управляющий регистр КР580ВВ55</td></tr>

<tr><th>08h - 0Вh</th><th>КР580ВВ55, принтер и прочая периферия</th></tr>

<tr><td>08h</td><td>Порт принтера</td></tr>
<tr><td>09h</td><td>Вертикальный сдвиг экрана</td></tr>
<tr><td>0Ah</td><td>VCJPxMMM<br><br>
V - видеостраницы<br>
С - вывод на магнитофон<br>
J - строб джойстика (переменные резистры)<br>
P - строб принтера<br>
М - карта памяти<br>
</td></tr>
<tr><td>0Bh</td><td>Управляющий регистр КР580ВВ55</td></tr>

<tr><th>0Ch</th><th>Информационный регистр</th></tr>

<tr><td>0Сh</td><td>
xxxxNNNN<br><br>
N - Номер компьютера в локальной сети (0 - учительский)
</td></tr>

<tr><th>10h - 13h</th><th>Регистры палитры</th></tr>
<tr><td>10h - 13h</td><td>
BBGGRRWW<br><br>
B - интенсивность синего для цветного монитора<br>
G - интенсивность зелёного для цветного монитора<br>
R - интенсивность красного для цветного монитора<br>
W - градация серого для ч/б монитора<br>
<br>
Все значения инверсные, 11b соответствует черному цвету<br>
</td></tr>

<tr><th>14h - 15h</th><th>КР580ВН59, контроллер прерываний</th></tr>
<tr><td>14h</td><td>При записи команда. При чтении источник прерывания:<br><br>
7 бит - конец периода после строба джойстика 1<br>
6 бит - конец периода после строба джойстика 2<br>
5 бит - слот расширения<br>
4 бит - момент спада на входе с магнитофона<br>
3 бит - готовность последовательного порта (локальной сети)<br>
2 бит - готовность принтера<br>
1 бит - таймер<br>
0 бит - конец кадрового синхроимпульса
</tr>
<tr><td>15h</td><td>Разрешение прерываний, битовая маска см. выше.</td></tr>

<tr><th>18h - 19h</th><th>КР580ВВ51А, последовательный порт, локальная сеть</th></tr>
<tr><td>18h</td><td>Регистр данных</td></tr>
<tr><td>19h</td><td>Управляющий регистр. Включение динамика, команды 05h и 25h.</td></tr>

<tr><th>1Сh - 1Fh</th><th>КР1818ВГ93, контроллер дисководов, находится на подключаемом модуле</th></tr>
<tr><td>1Ch</td><td>Запись команды и чтение состояния</td></tr>
<tr><td>1Dh</td><td>Номер дорожки</td></tr>
<tr><td>1Eh</td><td>Номер сектора</td></tr>
<tr><td>1Fh</td><td>Чтение и запись данных</td></tr>
</table>

<p>3 старшие бита адреса при дешифрации адреса не учитываются.</p>

</body>
</html>
