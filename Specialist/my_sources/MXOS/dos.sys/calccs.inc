;+---------------------------------------------------------------------------
; MXOS
; Расчет контрольной суммы
;
; На входе
;  hl - начальный адрес
;  de - конечный адрес
;
; На выходе
;  bc - контрольная сумма
;
; 2013-12-12 Дизассемблировано vinxru
;----------------------------------------------------------------------------

calcCS:		lxi	b, 0
calcCS_1:	mov	a, m
		add	c
		mov	c, a
		push	psw
		call	cmp_hl_de_2
		jz	calcCS_2
		pop	psw
		mov	a, b
		adc	m
		mov	b, a
		inx	h
		jmp	calcCS_1

; ---------------------------------------------------------------------------

calcCS_2:	pop	psw
		ret